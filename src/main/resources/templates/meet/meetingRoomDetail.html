<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title th:text="${meetingRoom.roomName}">회의실 상세</title>
</head>
<body>
<h1 th:text="${meetingRoom.roomName}">회의실 이름</h1>
<p>위치: <span th:text="${meetingRoom.location}">위치 정보</span></p>
<p>수용 인원: <span th:text="${meetingRoom.capacity}">인원</span></p>

<h2>예약 현황 (오늘)</h2>
<table>
  <tr>
    <th>시간</th>
    <th>예약자</th>
    <th>상태</th>
  </tr>
  <tr th:each="reservation : ${reservations}">
    <td th:text="${#dates.format(reservation.startTime, 'HH:mm')} -
                      ${#dates.format(reservation.endTime, 'HH:mm')}">시간</td>
    <td th:text="${reservation.member.memberName}">예약자</td>
    <td th:text="${reservation.status}">상태</td>
  </tr>
</table>

<h2>예약하기</h2>
<form th:action="@{/reserve/meetingRoom/{roomId}/reserve(roomId=${meetingRoom.roomId})}" method="post">
  <label for="startTime">시작 시간:</label>
  <select name="startTime" id="startTime">
    <option th:each="hour : ${#numbers.sequence(9, 17)}"
            th:value="${#dates.format(#dates.createNow().withHour(hour).withMinute(0).withSecond(0).withNano(0), 'yyyy-MM-dd\'T\'HH:mm:ss')}"
            th:text="${hour}+':'+00"
            th:disabled="${#lists.contains(reservedHours, hour)}">
    </option>
  </select>
  <br>
  <label for="endTime">종료 시간:</label>
  <select name="endTime" id="endTime">
    <option th:each="hour : ${#numbers.sequence(10, 18)}"
            th:value="${#dates.format(#dates.createNow().withHour(hour).withMinute(0).withSecond(0).withNano(0), 'yyyy-MM-dd\'T\'HH:mm:ss')}"
            th:text="${hour}+':'+00"
            th:disabled="${#lists.contains(reservedHours, hour - 1)}">
    </option>
  </select>
  <br>
  <button type="submit">예약하기</button>
</form>

<!-- 성공 또는 에러 메시지 표시 -->
<div th:if="${message}">
  <p th:text="${message}" style="color: green;"></p>
</div>
<div th:if="${error}">
  <p th:text="${error}" style="color: red;"></p>
</div>

</body>
</html>
